<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Doble Vida â€” Tarjeta Final</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Orbitron:wght@500&display=swap');

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html,body { height: 100%; }

    body {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at center, #050505 0%, #000 100%);
      font-family: 'Orbitron', sans-serif;
      perspective: 1100px;
      overflow: hidden;
    }

    .card {
      width: 380px;
      height: 250px;
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card__inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.9s cubic-bezier(.2,.9,.3,1);
      transform-origin: 50% 50%;
      border-radius: 15px;
    }

    .card.is-flipped .card__inner {
      transform: rotateY(180deg);
    }

    .card__face {
      position: absolute;
      inset: 0;
      border-radius: 15px;
      backface-visibility: hidden;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 20px;
    }

    /* ===== LADO PROGRAMADOR ===== */
    .front {
      background: #001100;
      color: #00ff55;
      border: 1px solid rgba(0,255,85,0.15);
      box-shadow: 0 8px 30px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,85,0.1) inset;
      text-shadow: 0 0 8px rgba(0,255,85,0.4);
      z-index: 2;
    }

    .front h1 {
      position: relative;
      z-index: 5;
      padding: 8px 16px;
      background: rgba(0, 0, 0, 0.45);
      border-radius: 10px;
      font-size: 1.3rem;
      text-align: center;
    }

    .front p {
      position: relative;
      z-index: 5;
      font-size: 0.9rem;
      margin-top: 12px;
      color: #00ff99;
      text-shadow: 0 0 6px #00ff99;
      text-align: center;
    }

    .code-bg {
      position: absolute;
      inset: 0;
      font-family: monospace;
      font-size: 0.78rem;
      color: #00ff55;
      opacity: 0.18;
      white-space: pre;
      line-height: 1.05;
      pointer-events: none;
      overflow: hidden;
    }

    .code-mover {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      will-change: transform;
    }

    .code-chunk {
      padding: 6px 10px;
    }

    /* ===== LADO TEIBOLERA ===== */
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .back {
      background: linear-gradient(120deg, #ff0077, #ff6f00, #ff00ff, #ff0077);
      background-size: 300% 300%;
      animation: gradientShift 6s ease infinite;
      transform: rotateY(180deg);
      box-shadow: 0 15px 40px rgba(255,0,128,0.25);
      color: #fff;
      font-family: 'Bebas Neue', cursive;
      letter-spacing: 1px;
    }

    .back::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 30% 80%, rgba(255,255,255,0.2), transparent 40%),
                  radial-gradient(circle at 80% 20%, rgba(255,255,255,0.25), transparent 50%);
      mix-blend-mode: screen;
      animation: shimmer 3s ease-in-out infinite alternate;
    }

    @keyframes shimmer {
      from { opacity: 0.2; transform: scale(1); }
      to { opacity: 0.6; transform: scale(1.1); }
    }

    .back h1 {
      position: relative;
      z-index: 5;
      padding: 10px 18px;
      border-radius: 10px;
      font-size: 1.6rem;
      text-align: center;
      background: rgba(0, 0, 0, 0.25);
      text-shadow: 0 0 15px #fff, 0 0 25px #ff00ff;
      animation: pulse 1.6s infinite alternate;
    }

    .back p {
      z-index: 5;
      position: relative;
      font-size: 1.05rem;
      margin-top: 10px;
      color: #fff1ff;
      text-shadow: 0 0 10px #ffb6ff;
      text-align: center;
    }

    @keyframes pulse {
      from { transform: scale(1); opacity: 1; }
      to { transform: scale(1.06); opacity: 0.9; }
    }

    .particle {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      pointer-events: none;
      mix-blend-mode: screen;
      filter: blur(6px);
      opacity: 0.9;
      transform: translateY(0) scale(1);
    }

    .card__shadow {
      position: absolute;
      width: 120%;
      height: 40%;
      left: -10%;
      bottom: -6%;
      background: radial-gradient(closest-side, rgba(0,0,0,0.45), transparent 60%);
      filter: blur(12px);
      transform: translateZ(-200px);
      pointer-events: none;
    }

    @media (max-width:420px){
      .card{ transform: scale(.9); }
    }
  </style>
</head>
<body>
  <div class="card" id="card">
    <div class="card__inner" id="cardInner">
      <!-- LADO PROGRAMADOR -->
      <div class="card__face front" aria-hidden="false">
        <div class="code-bg" aria-hidden="true">
          <div class="code-mover" id="codeMover">
            <div class="code-chunk" id="chunkA"></div>
            <div class="code-chunk" id="chunkB"></div>
          </div>
        </div>
        <h1>De dÃ­a soy programador ðŸ’»</h1>
        <p>Convierto el cafÃ© en cÃ³digo y los bugs en leyendas.</p>
      </div>

      <!-- LADO TEIBOLERA -->
      <div class="card__face back" aria-hidden="true" id="backFace">
        <h1>De noche soy una teibolera ðŸ’ƒ</h1>
        <p>Cada movimiento es un algoritmo para el deseo.</p>
      </div>
    </div>
    <div class="card__shadow" aria-hidden="true"></div>
  </div>

  <audio id="sound-tech" preload="auto" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_16f58c42ee.mp3?filename=tech-click-2-103339.mp3"></audio>
  <audio id="sound-fiesta" preload="auto" src="https://cdn.pixabay.com/download/audio/2021/09/13/audio_2d56cdbac5.mp3?filename=party-112370.mp3"></audio>

  <script>
    const card = document.getElementById('card');
    const backFace = document.getElementById('backFace');
    const soundTech = document.getElementById('sound-tech');
    const soundFiesta = document.getElementById('sound-fiesta');

    // === Fondo con cÃ³digo animado ===
    const mover = document.getElementById('codeMover');
    const chunkA = document.getElementById('chunkA');
    const chunkB = document.getElementById('chunkB');

    const fragment = [
      'const Felix = {',
      '  profesion: "Programador",',
      '  modo: "DÃ­a",',
      '  skills: ["HTML","CSS","JS","Data Analysis"],',
      '  switchVida(){ this.modo = (this.modo==="DÃ­a")?"Noche":"DÃ­a"; }',
      '};',
      '',
      'function build(){',
      '  console.log("Compilando ideas...");',
      '  console.log("Ejecutando sueÃ±os...");',
      '  console.log("Desplegando en producciÃ³n ðŸš€");',
      '}',
      ''
    ].join('\n');

    function makeLongText(mult = 40) {
      let out = '';
      for (let i = 0; i < mult; i++) {
        out += fragment.replace(/Felix/g, (i%9===0?Felix_v${i}:'Felix')) + '\n';
      }
      return out;
    }

    const longA = makeLongText(42);
    chunkA.textContent = longA;
    chunkB.textContent = longA;

    let y = 0, last = null, speed = 28, chunkH = 0;
    requestAnimationFrame(() => { chunkH = chunkA.offsetHeight; });
    function tick(ts){
      if (last == null) last = ts;
      const dt = (ts - last) / 1000;
      last = ts;
      y += speed * dt;
      if (chunkH && y >= chunkH) { y -= chunkH; }
      mover.style.transform = translateY(${-y}px);
      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);

    card.addEventListener('mouseenter', () => { speed = 45; });
    card.addEventListener('mouseleave', () => { speed = 28; });

    // === PartÃ­culas en modo noche ===
    function spawnParticle() {
      const p = document.createElement('div');
      p.className = 'particle';
      const colors = ['#fff9', '#ff66cc', '#ffd166', '#66ffea', '#ff55aa'];
      p.style.background = colors[(Math.random()*colors.length)|0];
      const bw = backFace.clientWidth, bh = backFace.clientHeight;
      const startX = Math.random() * bw;
      const startY = bh + (Math.random() * 60);
      p.style.left = startX + 'px';
      p.style.top = startY + 'px';
      const size = Math.random() * 10 + 4;
      p.style.width = size + 'px';
      p.style.height = size + 'px';
      backFace.appendChild(p);
      const duration = 2800 + Math.random()*2200;
      const deltaX = (Math.random()-0.5) * 120;
      const deltaY = - (200 + Math.random()*240);
      const start = performance.now();
      (function frame(now){
        const t = Math.min(1, (now - start)/duration);
        const ease = 1 - Math.pow(1 - t, 3);
        p.style.transform = translate(${deltaX*ease}px, ${deltaY*ease}px) scale(${1 - 0.35*ease});
        p.style.opacity = ${1 - ease};
        if (t < 1) requestAnimationFrame(frame); else p.remove();
      })(start);
    }
    setInterval(spawnParticle, 260);

    // === Volteo con sonido ===
    card.addEventListener('click', () => {
      const flippingToBack = !card.classList.contains('is-flipped');
      try {
        if (flippingToBack) { soundFiesta.currentTime = 0; soundFiesta.play(); }
        else { soundTech.currentTime = 0; soundTech.play(); }
      } catch(e){}
      card.classList.toggle('is-flipped');
    });
  </script>
</body>
</html>
